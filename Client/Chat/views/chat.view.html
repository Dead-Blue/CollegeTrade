<section data-ng-controller="ChatController">
  <div class="container">
      <div class="alert alert-warning alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Warning!</strong> 这里是跳蚤市场，请勿发布虚假信息。
</div>
  
<div class="panel panel-primary">
   <div class="panel-heading">
     <h3 class="panel-title">
         聊天室大厅－－当前在线人数为： <span>{{onlineMember}}</span> 
      </h3>
   </div>
   <button popover-placement="bottom" uib-popover-template="dynamicPopover.templateUrl" popover-title="{{dynamicPopover.title}}" type="button" class="btn btn-info pull-right">消息盒子</button>
  <div class="panel-body">
 <div data-ng-repeat="message in messages" data-ng-switch="message.type">
  <strong data-ng-switch-when='status'>
    <span data-ng-bind="message.created | date:'mediumTime'"></span>
       <span data-ng-bind = "message.username | chatName:message.username:user.username:message.fullName"></span>
    <span> </span>
    <span data-ng-bind="message.text"></span>
  </strong>
  <span data-ng-switch-default>
  <span data-ng-bind ="message.created | date:'mediumTime'"></span>
  <span><a class="btn btn-link"  ng-click="clickToOpen(message.username,message.fullName,message.socketId)" data-ng-bind = "message.username | chatName:message.username:user.username:message.fullName"></a></span>
  <span>:</span>
 <span data-ng-bind="message.text"></span>
  </span>
</div>
  </div>
</div>
<div data-ng-switch="user">
  <strong data-ng-switch-when=undefined>
       <strong>警告!</strong> 请先<a href="#/signin">登录</a>！
  </strong>
  <span data-ng-switch-default>
      <form  ng-submit="sendMessage(); " class="form-inline">
    <div class="form-group">
    <label for="SendMessage">发送消息</label>
    <input type="text" class="form-control" data-ng-model="messageText">
    <button type="submit" class="btn btn-default">发送</button>
    </div>
</form>
  </span>
</div>
  </div>
</section>
